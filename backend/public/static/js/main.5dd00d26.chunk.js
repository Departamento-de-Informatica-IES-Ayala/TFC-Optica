(this["webpackJsonpreact-optica"]=this["webpackJsonpreact-optica"]||[]).push([[0],{103:function(e,t,a){e.exports=a(165)},111:function(e,t,a){},112:function(e,t,a){},165:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(9),l=a.n(n),i=(a(108),a(109),a(111),a(112),a(10)),c=a(11),o=a(12),m=a(13),u=a(14),d=a(35),h=a(81),f=a.n(h),p=a(45),g=a.n(p);a(113),a(114),a(116);g.a.initializeApp({apiKey:"AIzaSyCpodxaWgqwls4795dWt3ZbqGEm9Ltt6fY",authDomain:"proyecto-consulta-firebase.firebaseapp.com",databaseURL:"https://proyecto-consulta-firebase.firebaseio.com",projectId:"proyecto-consulta-firebase",storageBucket:"proyecto-consulta-firebase.appspot.com",messagingSenderId:"1072801915077",appId:"1:1072801915077:web:3ea752b2a8a7839bb150ac"});var v=g.a.auth(),E=(g.a.firestore(),g.a.storage()),b=a(6),N=a.n(b),y={url:"https://tope-vision.herokuapp.com/"},x=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).url=y.url,e.state={identity:!1,user:{},userId:null,redirect:!1},e.logout=function(){v.signOut().then((function(){e.setState({identity:!1,user:{},userId:null,redirect:!0}),N.a.post(e.url+"carrito/cerrar")})).catch((function(e){alert(e.message)}))},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;if(!0===this.props.logged&&null!=v.currentUser&&!1===this.state.identity){var t=v.currentUser.email;N.a.get(this.url+"user/"+t).then((function(t){"success"===t.data.status?e.setState({identity:!0,user:t.data.user,userId:t.data.userId,redirect:!1}):e.setState({identity:null})}))}!1===this.state.identity&&N.a.post(this.url+"carrito/cerrar")}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,!0===this.state.redirect&&s.a.createElement(d.a,{to:"/signout"}),s.a.createElement("header",{id:"header",className:"container-fluid"},s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",id:"barra"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement(u.c,{to:"/",activeClassName:"active"},s.a.createElement("img",{src:f.a,className:"app-logo",id:"logo",alt:"Logotipo"}))),s.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},s.a.createElement("ul",{className:"navbar-nav mr-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(u.c,{to:"/",activeClassName:"active"},"Inicio")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(u.c,{to:"/servicios",activeClassName:"active"},"Servicios")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(u.c,{to:"/tienda/"+this.state.userId,activeClassName:"active"},"Tienda")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(u.c,{to:"/citas",activeClassName:"active"},"Citas"))),s.a.createElement("div",{className:"dropdown-divider "}),s.a.createElement("ul",{className:"navbar-nav navbar-right"},!1===this.state.identity||null===this.state.identity?s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{className:"nav-item"},s.a.createElement(u.c,{to:"/register",activeClassName:"active"},"Registro")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(u.c,{to:"/login",activeClassName:"active"},"Iniciar sesion"))):s.a.createElement(s.a.Fragment,null,s.a.createElement("li",{className:"nav-item dropdown"},s.a.createElement("p",{className:"nav-link dropdown-toggle",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.user.nombre+" "+this.state.user.apellidos),s.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},!1===this.state.user.admin?s.a.createElement(s.a.Fragment,null,s.a.createElement(u.b,{className:"dropdown-item",to:"/miperfil/"+this.state.userId},"Mi perfil")):s.a.createElement(s.a.Fragment,null,s.a.createElement(u.b,{className:"dropdown-item",to:"/adminperfil/"+this.state.userId},"Administracion")),s.a.createElement("div",{className:"dropdown-divider"}),s.a.createElement(u.b,{className:"dropdown-item pointer",style:{cursor:"pointer"},onClick:this.logout},"Cerrar sesion")))))))))}}]),a}(r.Component),w=(a(137),a(99)),C=a(83),S=a.n(C),R=a(84),k=a.n(R),I=a(85),O=a.n(I),j=a(86),F=a.n(j),A=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={},e}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{id:"home"},s.a.createElement("div",{id:"slider",className:" container-fluid p-0"},s.a.createElement(w.a,{showArrows:!1,showThumbs:!1,infiniteLoop:!0,autoPlay:!0,interval:6e3,transitionTime:1e3,showStatus:!1,showIndicators:!1},s.a.createElement("div",null,s.a.createElement("img",{src:S.a,alt:"carrousel1"})),s.a.createElement("div",null,s.a.createElement("img",{src:F.a,alt:"carrousel4"})),s.a.createElement("div",null,s.a.createElement("img",{src:k.a,alt:"carrousel2"})),s.a.createElement("div",null,s.a.createElement("img",{src:O.a,alt:"carrousel3"})))),s.a.createElement("div",{className:"center"},s.a.createElement("h1",{className:"titulo"},"Bienvenido a Tope Vision"),s.a.createElement("div",{id:"content"},s.a.createElement("hr",null),s.a.createElement("div",null,s.a.createElement("p",null,"Contenido de prueba"),s.a.createElement("p",null,"dvdsvdf")),s.a.createElement("div",null,s.a.createElement("p",null,"Contenido de prueba"),s.a.createElement("p",null,"dvdsvdf")))))}}]),a}(r.Component),q=function(){return s.a.createElement("footer",{id:"footer"},s.a.createElement("div",{className:"center"},s.a.createElement("p",null,"\xa9 Alvaro Torrente Perez")))},U=a(33),z=a.n(U),_=a(58),D=a.n(_),M=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).emailRef=s.a.createRef(),e.passwordRef=s.a.createRef(),e.url=y.url,e.state={email:null,password:null,status:null,user:{}},e.inicioGoogle=function(){var t=new D.a.auth.GoogleAuthProvider;v.signInWithPopup(t).then((function(t){var a=t.user,r=a.displayName.split(" "),s={nombre:r[0],apellidos:r[1],email:a.email,telefono:"",dni:"",imagen:"https://firebasestorage.googleapis.com/v0/b/proyecto-consulta-firebase.appspot.com/o/default-user-image.png?alt=media&token=6c3d7402-c876-48ff-b1e1-5d1a0b6cab66"};N.a.post(e.url+"user2",s).then((function(t){t.data&&e.setState({status:"success"})}))}))},e.inicioFacebook=function(){var t=new D.a.auth.FacebookAuthProvider;v.signInWithPopup(t).then((function(t){var a=t.user,r=a.displayName.split(" "),s={nombre:r[0],apellidos:r[1],email:a.email,telefono:"",dni:"",imagen:"https://firebasestorage.googleapis.com/v0/b/proyecto-consulta-firebase.appspot.com/o/default-user-image.png?alt=media&token=6c3d7402-c876-48ff-b1e1-5d1a0b6cab66"};N.a.post(e.url+"user2",s).then((function(t){t.data&&e.setState({status:"success"})}))}))},e.changeState=function(){e.setState({email:e.emailRef.current.value,password:e.passwordRef.current.value})},e.recibirFormulario=function(t){t.preventDefault(),e.changeState(),e.validator.allValid()?v.signInWithEmailAndPassword(e.state.email,e.state.password).then((function(){e.setState({password:null,status:"success"})})).catch((function(e){alert(e.message)})):(e.validator.showMessages(),e.forceUpdate(),e.setState({status:"failed"}))},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){this.validator=new z.a({messages:{required:"Este campo es obligatorio",alpha_num_space:"Solo se permiten caracteres alfanumericos",numeric:"Solo se permiten numeros",email:"Email no es correcto"}})}},{key:"render",value:function(){var e=this;return"success"===this.state.status?s.a.createElement(d.a,{to:"/logged"}):s.a.createElement("div",{id:"login",className:" col-12"},s.a.createElement("h2",{className:"text-center p-3 text-md-left"},"Iniciar sesion"),s.a.createElement("hr",null),s.a.createElement("form",{className:"col-md-5",onSubmit:this.recibirFormulario},s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"email",className:"ml-2"},"Email"),s.a.createElement("input",{className:"form-control mr-2 ml-2",type:"text",name:"email",ref:this.emailRef,onChange:this.changeState,required:!0}),this.validator.message("email",this.state.email,"required|email")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"password",className:"ml-2"},"Contrase\xf1a"),s.a.createElement("input",{className:"form-control mr-2 ml-2",type:"password",name:"password",ref:this.passwordRef,onChange:this.changeState,required:!0,minlength:"6"}),this.validator.message("password",this.state.password,"required")),s.a.createElement("div",{className:"clearfix"}),s.a.createElement("input",{type:"submit",value:"Iniciar sesion",class:"btn btn-success"})),s.a.createElement("div",{className:"botonessesion"},s.a.createElement("button",{className:"btngoogle row",onClick:function(){return e.inicioGoogle()}},s.a.createElement("img",{src:"https://www.gstatic.com/mobilesdk/160512_mobilesdk/auth_service_google.svg",alt:"google-boton"})," ",s.a.createElement("p",null,"Inicia sesion con Google")),s.a.createElement("button",{className:"btnfacebook row",onClick:function(){return e.inicioFacebook()}},s.a.createElement("img",{src:"https://www.gstatic.com/mobilesdk/160409_mobilesdk/images/auth_service_facebook.svg",alt:"facebook-boton"})," ",s.a.createElement("p",null,"Inicia sesion con Facebook"))))}}]),a}(r.Component),P=a(15),L=a.n(P),W=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).nombreRef=s.a.createRef(),e.apellidosRef=s.a.createRef(),e.emailRef=s.a.createRef(),e.passwordRef=s.a.createRef(),e.password2Ref=s.a.createRef(),e.dniRef=s.a.createRef(),e.telefonoRef=s.a.createRef(),e.url=y.url,e.state={user:{},status:null,password2:null,archivo:"default",loading:!1},e.confirmpassword=null,e.changeState=function(){e.setState({user:{nombre:e.nombreRef.current.value,apellidos:e.apellidosRef.current.value,email:e.emailRef.current.value,password:e.passwordRef.current.value,telefono:e.telefonoRef.current.value,dni:e.dniRef.current.value},password2:e.password2Ref.current.value}),e.state.password2===e.state.user.password?e.confirmpassword=!0:e.confirmpassword=!1},e.recibirFormulario=function(t){t.preventDefault(),e.changeState(),e.ejecutarFormulario()},e.recogerFoto=function(t){e.setState({archivo:t.target.files[0]})},e.ejecutarFormulario=function(){if(!0===e.confirmpassword)if(e.validator.allValid())if("default"!==e.state.archivo)e.setState({loading:!0}),E.ref(e.state.archivo.name).put(e.state.archivo).then((function(){E.ref().child(e.state.archivo.name).getDownloadURL().then((function(t){e.setState({loading:!1});var a=e.state.user;N.a.post(e.url+"user",{user:a,url:t}).then((function(t){"success"===t.data.status?(e.setState({status:"success"}),L()("Usuario registrado","Te has registrado correctamente","success")):e.setState({status:"failed"})}))}))}));else{var t=e.state.user;N.a.post(e.url+"user",{user:t,url:"https://firebasestorage.googleapis.com/v0/b/proyecto-consulta-firebase.appspot.com/o/default-user-image.png?alt=media&token=6c3d7402-c876-48ff-b1e1-5d1a0b6cab66"}).then((function(t){"success"===t.data.status?(e.setState({status:"success"}),L()("Usuario registrado","Te has registrado correctamente","success")):e.setState({status:"failed"})}))}else e.validator.showMessages(),e.forceUpdate(),e.setState({status:"failed"})},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){this.validator=new z.a({locale:"es",validators:{names_surnames:{message:"El campo debe contener letras y espacios",rule:function(e,t,a){return a.helpers.testRegex(e,/^[a-zA-Z\xc0-\xff\u00f1\u00d1]+(\s*[a-zA-Z\xc0-\xff\u00f1\u00d1]*)*[a-zA-Z\xc0-\xff\u00f1\u00d1]+$/)&&-1===t.indexOf(e)}},email2:{message:"El email no es valido",rule:function(e,t,a){return a.helpers.testRegex(e,/^(?:[^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*|"[^\n"]+")@(?:[^<>()[\].,;:\s@"]+\.)+[^<>()[\]\.,;:\s@"]{2,63}$/i)&&-1===t.indexOf(e)}},telefono:{message:"El telefono no es valido",rule:function(e,t,a){return a.helpers.testRegex(e,/^[896]\d{8}$/)&&-1===t.indexOf(e)}},dni:{message:"El DNI no es valido",rule:function(e,t,a){return a.helpers.testRegex(e,/^\d{8}[a-zA-Z]$/)&&-1===t.indexOf(e)}}},messages:{required:"Este campo es obligatorio",alpha_num_space:"Solo se permiten caracteres alfanumericos",numeric:"Solo se permiten numeros",email:"Email no es correcto",alpha_space:"Solo se permiten letras y espacios"}})}},{key:"render",value:function(){var e=this;return"success"===this.state.status?s.a.createElement(d.a,{to:"/login"}):s.a.createElement("div",{id:"registro",className:" col-12"},s.a.createElement("h2",{className:"text-center p-3 text-md-left"},"Registro"),s.a.createElement("hr",null),s.a.createElement("form",{className:"col-md-5",onSubmit:this.recibirFormulario},s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"nombre",className:"ml-2"},"Nombre"),s.a.createElement("input",{id:"nombre",className:"form-control mr-2 ml-2",type:"text",name:"nombre",ref:this.nombreRef,onChange:this.changeState,required:!0}),this.validator.message("nombre",this.state.user.nombre,"required|names_surnames")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"apellidos",className:"ml-2"},"Apellidos"),s.a.createElement("input",{className:"form-control mr-2 ml-2",type:"text",name:"apellidos",ref:this.apellidosRef,onChange:this.changeState,required:!0}),this.validator.message("apellidos",this.state.user.apellidos,"required|names_surnames")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"telefono",className:"ml-2"},"Telefono"),s.a.createElement("input",{className:"form-control mr-2 ml-2",type:"text",name:"telefono",ref:this.telefonoRef,onChange:this.changeState,maxLength:"9",required:!0}),this.validator.message("telefono",this.state.user.telefono,"required|telefono")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"dni",className:"ml-2"},"DNI"),s.a.createElement("input",{className:"form-control mr-2 ml-2",type:"text",name:"dni",ref:this.dniRef,onChange:this.changeState,onBlur:this.changeState,required:!0}),this.validator.message("dni",this.state.user.dni,"required|dni")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"image",className:"ml-2"},"Avatar"),s.a.createElement("input",{className:"form-control-file mr-2 ml-2",type:"file",name:"imagen",onChange:function(t){return e.recogerFoto(t)}}),!0===this.state.loading&&s.a.createElement("small",null,"Cargando imagen...")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"email",className:"ml-2"},"Email"),s.a.createElement("input",{className:"form-control mr-2 ml-2",type:"text",name:"email",ref:this.emailRef,onChange:this.changeState,onBlur:this.changeState,required:!0}),this.validator.message("email",this.state.user.email,"required|email2")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"password",className:"ml-2"},"Contrase\xf1a"),s.a.createElement("input",{className:"form-control mr-2 ml-2",type:"password",name:"password",ref:this.passwordRef,onChange:this.changeState,onBlur:this.changeState,required:!0,minlength:"6"}),this.validator.message("password",this.state.user.password,"required")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"password2",className:"ml-2"},"Confirmar contrase\xf1a"),s.a.createElement("input",{className:"form-control mr-2 ml-2",type:"password",name:"password2",ref:this.password2Ref,onChange:this.changeState,onBlur:this.changeState,onKeyUp:this.changeState,required:!0,minlength:"6"}),!1===this.confirmpassword&&s.a.createElement("small",null,"La contrase\xf1a no coincide")),s.a.createElement("div",{className:"clearfix"}),s.a.createElement("input",{type:"submit",onFocus:this.changeState,onClick:this.changeState,value:"Registro",class:"btn btn-success"})))}}]),a}(r.Component),H=a(87),T=a.n(H),B=a(169),Y=a(170),Z=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).url=y.url,e.userId=null,e.productaux=[],e.loadedCarrito=!1,e.state={identity:!0,user:{},status:null,productos:[],carrito:[],categoria:"gafas",edad:"adulto",genero:"masculino",show:!1},e.onCategoriaChange=function(t){e.setState({categoria:t.target.value},e.getProductos)},e.onEdadChange=function(t){e.setState({edad:t.target.value},e.getProductos)},e.onGeneroChange=function(t){e.setState({genero:t.target.value},e.getProductos)},e.getUser=function(t){N.a.get(e.url+"getuser/"+t).then((function(t){"success"===t.data.status&&e.setState({user:t.data.user})}))},e.getCarrito=function(){N.a.get(e.url+"carrito").then((function(t){"success"===t.data.status&&(t.data.carrito?(e.setState({carrito:t.data.carrito}),e.loadedCarrito=!0):e.loadedCarrito=!1)}))},e.getProductos=function(){var t=e.state.categoria,a=e.state.edad,r=e.state.genero;N.a.post(e.url+"productos",{categoria:t,edad:a,genero:r}).then((function(t){"success"===t.data.status?e.setState({productos:t.data.productos,status:"success"}):e.setState({productos:[],status:"error"})}))},e.pulsadoEvento=function(t){e.state.productos.forEach((function(a){t===a.productId&&(e.productaux.push(a),e.setState({show:!0}))}))},e.cerradoEvento=function(){e.setState({show:!1}),e.productaux=[]},e.agregarItem=function(t){N.a.post(e.url+"carrito/agregar",{item_id:t}).then((function(t){"success"===t.data.status?(e.setState({carrito:t.data.carrito}),e.loadedCarrito=!0,e.cerradoEvento(),L()("Producto agregado correctamente","El producto se ha a\xf1adido al carrito correctamente","success")):(e.cerradoEvento(),L()("El producto no se ha agregado correctamente","Ha ocurrido un error al agregar el producto al carrito, intentelo mas tarde","error"))}))},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;v.currentUser?(this.userId=this.props.match.params.id,"null"===this.userId?this.setState({identity:!1}):N.a.get(this.url+"getemail/"+this.userId).then((function(t){"success"===t.data.status&&t.data.email===v.currentUser.email?e.getUser(e.userId):e.setState({identity:!1})}))):this.setState({identity:!1})}},{key:"componentDidMount",value:function(){this.getProductos(),this.getCarrito()}},{key:"render",value:function(){var e,t=this;return e=this.state.productos.length>=1?this.state.productos.map((function(e,a){return s.a.createElement("div",{key:a,className:"card"},s.a.createElement("img",{className:"card-img-top",src:e.product.imagen,alt:"Cardcap"}),s.a.createElement("div",{className:"card-body pt-0 pb-0"},s.a.createElement("h4",{className:"card-title "},e.product.nombre),s.a.createElement("p",{className:"card-text h5"},e.product.precio," \u20ac"),s.a.createElement("br",null)),s.a.createElement("div",{class:"card-footer pt-2 pb-2"},s.a.createElement("button",{className:"btn btn-primary",onClick:function(){return t.pulsadoEvento(e.productId)}},"Ver producto")))})):"error"===this.state.status?s.a.createElement("h1",{className:"mt-5 text-center"},"No hay productos para mostrar"):s.a.createElement("h1",{className:"mt-5 text-center"},"Cargando..."),!1===this.state.identity?s.a.createElement(d.a,{to:"/login"}):s.a.createElement("div",{id:"tienda",className:"container-fluid mt-3"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{id:"filtros",className:"col-2 ml-4"},s.a.createElement("div",{class:"form-group text-left m-2"},s.a.createElement("label",{htmlFor:"categoria"},"Categorias: "),s.a.createElement("select",{class:"form-control",name:"categoria",onChange:this.onCategoriaChange},s.a.createElement("option",{selected:!0,value:"gafas"},"Gafas de sol"),s.a.createElement("option",{value:"lentillas"},"Lentillas"),s.a.createElement("option",{value:"limpieza"},"Limpieza y accesorios"))),s.a.createElement("div",{className:"genero text-left m-2"},s.a.createElement("label",{htmlFor:"genero"},"Genero: "),s.a.createElement("div",{class:"form-check"},s.a.createElement("input",{type:"radio",checked:"masculino"===this.state.genero,class:"form-check-input",name:"masculino",value:"masculino",onChange:this.onGeneroChange}),s.a.createElement("label",{class:"form-check-label",htmlFor:"masculino"},"Hombre")),s.a.createElement("div",{className:"form-check"},s.a.createElement("input",{type:"radio",class:"form-check-input",checked:"femenino"===this.state.genero,name:"femenino",value:"femenino",onChange:this.onGeneroChange}),s.a.createElement("label",{class:"form-check-label",htmlFor:"femenino"},"Mujer"))),s.a.createElement("div",{className:"edad text-left m-2"},s.a.createElement("label",{htmlFor:"edad"},"Edad: "),s.a.createElement("div",{class:"form-check"},s.a.createElement("input",{type:"radio",checked:"adulto"===this.state.edad,class:"form-check-input",name:"adulto",value:"adulto",onChange:this.onEdadChange}),s.a.createElement("label",{class:"form-check-label",htmlFor:"adulto"},"Adulto")),s.a.createElement("div",{className:"form-check"},s.a.createElement("input",{type:"radio",checked:"infantil"===this.state.edad,class:"form-check-input",name:"infantil",value:"infantil",onChange:this.onEdadChange}),s.a.createElement("label",{class:"form-check-label",htmlFor:"infantil"},"Infantil")))),s.a.createElement("div",{id:"productos",className:"col-7 m-2"},e),!0===this.loadedCarrito&&s.a.createElement("div",{id:"carrito-button",className:"col-2 m-2 p-3"},s.a.createElement(u.b,{to:{pathname:"/carrito",state:{userId:this.userId,carrito:this.state.carrito}},className:"ircarrito btn btn-primary text-center"},s.a.createElement("div",{className:"numeroitems d-inline pr-2 pl-2 m-3 d-flex align-items-center justify-content-center align-self-center"},s.a.createElement("span",{className:"m-2"},this.state.carrito.length," "),s.a.createElement("img",{className:"m-2",src:"../"+T.a,alt:"icono-carrito"})),s.a.createElement("p",{className:"mb-2"},"Ver Carrito"))),1===this.productaux.length&&s.a.createElement(B.a,{show:this.state.show,onHide:this.cerradoEvento,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},s.a.createElement(B.a.Header,{closeButton:!0},s.a.createElement(B.a.Title,{className:"text-center"},s.a.createElement("img",{className:"img-item",src:this.productaux[0].product.imagen,alt:"iamgen-item"}),s.a.createElement("h4",null,this.productaux[0].product.nombre),s.a.createElement("p",null,s.a.createElement("small",null,"Id referencia: ",this.productaux[0].productId)),s.a.createElement("p",{className:"card-text h5"},this.productaux[0].product.precio," \u20ac"),s.a.createElement("br",null))),s.a.createElement(B.a.Body,null,s.a.createElement("div",{className:"infocitacontacto pl-3"},s.a.createElement("p",{className:"m-1 h5 "},"Descripcion del producto:"),s.a.createElement("p",{className:"m-1 "},this.productaux[0].product.descripcion)),s.a.createElement("div",{className:"infoactualizarcita mt-3"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col d-flex justify-content-between  mt-2 mb-2"},s.a.createElement("button",{className:"btn btn-primary m-auto",onClick:function(){return t.agregarItem(t.productaux[0].productId)}},"Agregar al carrito"))))),s.a.createElement(B.a.Footer,null,s.a.createElement(Y.a,{variant:"secondary",onClick:this.cerradoEvento},"Cerrar")))))}}]),a}(r.Component),$=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).nombreRef=s.a.createRef(),e.apellidosRef=s.a.createRef(),e.emailRef=s.a.createRef(),e.telefonoRef=s.a.createRef(),e.url=y.url,e.state={cita:{nombre:null,apellidos:null,email:null,telefono:null},status:null},e.changeState=function(){e.setState({cita:{nombre:e.nombreRef.current.value,apellidos:e.apellidosRef.current.value,email:e.emailRef.current.value,telefono:e.telefonoRef.current.value}})},e.recibirFormulario=function(t){if(t.preventDefault(),e.changeState(),e.validator.allValid()){var a=e.state.cita;N.a.post(e.url+"cita",a).then((function(t){"success"===t.data.status?(e.setState({status:"success"}),L()("Cita enviada","Contactaremos contigo por email","success"),N.a.post(e.url+"email/cita")):(e.setState({status:"failed"}),L()("Cita no enviada","Se ha producido un error","error"))}))}else e.validator.showMessages(),e.forceUpdate(),e.setState({status:"failed"})},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){this.validator=new z.a({locale:"es",validators:{names_surnames:{message:"El campo debe contener letras y espacios",rule:function(e,t,a){return a.helpers.testRegex(e,/^[a-zA-Z\xc0-\xff\u00f1\u00d1]+(\s*[a-zA-Z\xc0-\xff\u00f1\u00d1]*)*[a-zA-Z\xc0-\xff\u00f1\u00d1]+$/)&&-1===t.indexOf(e)}},email2:{message:"El email no es valido",rule:function(e,t,a){return a.helpers.testRegex(e,/^(?:[^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*|"[^\n"]+")@(?:[^<>()[\].,;:\s@"]+\.)+[^<>()[\]\.,;:\s@"]{2,63}$/i)&&-1===t.indexOf(e)}},telefono:{message:"El telefono no es valido",rule:function(e,t,a){return a.helpers.testRegex(e,/^[896]\d{8}$/)&&-1===t.indexOf(e)}},dni:{message:"El DNI no es valido",rule:function(e,t,a){return a.helpers.testRegex(e,/^\d{8}[a-zA-Z]$/)&&-1===t.indexOf(e)}}},messages:{required:"Este campo es obligatorio",alpha_num_space:"Solo se permiten caracteres alfanumericos",numeric:"Solo se permiten numeros",email:"Email no es correcto",alpha_space:"Solo se permiten letras y espacios"}})}},{key:"render",value:function(){return s.a.createElement("div",{id:"citas",className:" col-12"},s.a.createElement("h2",{className:"text-center p-3 text-md-left"},"Pedir Cita"),s.a.createElement("hr",null),s.a.createElement("form",{className:"col-md-5",onSubmit:this.recibirFormulario},s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"nombre",className:"ml-2"},"Nombre"),s.a.createElement("input",{id:"nombre",className:"form-control mr-2 ml-2",type:"text",name:"nombre",ref:this.nombreRef,onChange:this.changeState,required:!0}),this.validator.message("nombre",this.state.cita.nombre,"required|names_surnames")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"apellidos",className:"ml-2"},"Apellidos"),s.a.createElement("input",{className:"form-control mr-2 ml-2",type:"text",name:"apellidos",ref:this.apellidosRef,onChange:this.changeState,required:!0}),this.validator.message("apellidos",this.state.cita.apellidos,"required|names_surnames")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"telefono",className:"ml-2"},"Telefono"),s.a.createElement("input",{className:"form-control mr-2 ml-2",type:"text",name:"telefono",ref:this.telefonoRef,onChange:this.changeState,maxLength:"9",required:!0}),this.validator.message("telefono",this.state.cita.telefono,"required|telefono")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"email",className:"ml-2"},"Email"),s.a.createElement("input",{className:"form-control mr-2 ml-2",type:"text",name:"email",ref:this.emailRef,onChange:this.changeState,required:!0}),this.validator.message("email",this.state.cita.email,"required|email2")),s.a.createElement("div",{className:"clearfix"}),"success"===this.state.status?s.a.createElement("input",{type:"submit",value:"Pedir cita",class:"btn btn-success",disabled:!0}):s.a.createElement("input",{type:"submit",value:"Pedir cita",class:"btn btn-success"})))}}]),a}(r.Component),G=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={},e}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("h1",null,"Servicios")}}]),a}(r.Component),V=function(){return s.a.createElement("section",{id:"content",className:"mt-5"},s.a.createElement("h2",{className:"subheader"},"Pagina no encontrada"),s.a.createElement("p",null,"La pagina no existe en la web"))},J=a(39),K=a.n(J),Q=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).url=y.url,e.userId=null,e.admin=null,e.listHistorial=null,e.nombreRef=s.a.createRef(),e.apellidosRef=s.a.createRef(),e.dniRef=s.a.createRef(),e.telefonoRef=s.a.createRef(),e.textoHistorialRef=s.a.createRef(),e.fechaHistorialRef=s.a.createRef(),e.state={identity:!0,user:{},status:null,loading:!0,archivo:"default",loading_file:!1,eliminado:!1},e.getUser=function(t){N.a.get(e.url+"getuser/"+t).then((function(t){"success"===t.data.status&&e.setState({user:t.data.user,historial:t.data.user.historial,loading:!1})}))},e.changeState=function(){e.setState({user:{nombre:e.nombreRef.current.value,apellidos:e.apellidosRef.current.value,telefono:e.telefonoRef.current.value,dni:e.dniRef.current.value,historial:e.state.historial,imagen:e.state.user.imagen}})},e.addHistorial=function(){var t=e.state.historial,a={texto:e.textoHistorialRef.current.value,fecha:K()(e.fechaHistorialRef.current.value).format("DD/MM/YYYY")};t.push(a),e.textoHistorialRef.current.value="",e.setState({historial:t})},e.recogerFoto=function(t){e.setState({archivo:t.target.files[0]})},e.recibirFormulario=function(t){if(t.preventDefault(),e.changeState(),e.validator.allValid())if("default"!==e.state.archivo)e.setState({loading_file:!0}),E.ref(e.state.archivo.name).put(e.state.archivo).then((function(){E.ref().child(e.state.archivo.name).getDownloadURL().then((function(t){e.setState({loading_file:!1});var a=e.state.user;N.a.put(e.url+"user",{user:a,userId:e.userId,url:t}).then((function(a){"success"===a.data.status?(e.setState({user:{nombre:e.nombreRef.current.value,apellidos:e.apellidosRef.current.value,telefono:e.telefonoRef.current.value,dni:e.dniRef.current.value,historial:e.state.historial,imagen:t},status:"success"}),L()("Usuario actualizado","Tu perfil se ha actualizado correctamente","success")):(e.setState({status:"failed"}),L()("Usuario no actualizado","Tu perfil no se ha actualizado correctamente","error"))}))}))}));else{var a=e.state.user;N.a.put(e.url+"user",{user:a,userId:e.userId,url:e.state.user.imagen}).then((function(t){"success"===t.data.status?(e.setState({user:{nombre:e.nombreRef.current.value,apellidos:e.apellidosRef.current.value,telefono:e.telefonoRef.current.value,dni:e.dniRef.current.value,historial:e.state.historial,imagen:e.state.user.imagen},status:"success"}),L()("Usuario actualizado","Tu perfil se ha actualizado correctamente","success")):(e.setState({status:"failed"}),L()("Usuario no actualizado","Tu perfil no se ha actualizado correctamente","error"))}))}else e.validator.showMessages(),e.forceUpdate(),e.setState({status:"failed"})},e.eliminarUsuario=function(){var t=e.userId;N.a.delete(e.url+"user/"+t).then((function(e){"success"===e.data.status?L()("Usuario eliminado","El usuario ha sido eliminado correctamente","success"):L()("Usuario no eliminado","Se ha producido un error al eliminar usuario","error")}))},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;if(this.props.match.params.admin&&(this.admin=!0),this.validator=new z.a({locale:"es",validators:{names_surnames:{message:"El campo debe contener letras y espacios",rule:function(e,t,a){return a.helpers.testRegex(e,/^[a-zA-Z\xc0-\xff\u00f1\u00d1]+(\s*[a-zA-Z\xc0-\xff\u00f1\u00d1]*)*[a-zA-Z\xc0-\xff\u00f1\u00d1]+$/)&&-1===t.indexOf(e)}},email2:{message:"El email no es valido",rule:function(e,t,a){return a.helpers.testRegex(e,/^(?:[^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*|"[^\n"]+")@(?:[^<>()[\].,;:\s@"]+\.)+[^<>()[\]\.,;:\s@"]{2,63}$/i)&&-1===t.indexOf(e)}},telefono:{message:"El telefono no es valido",rule:function(e,t,a){return a.helpers.testRegex(e,/^[896]\d{8}$/)&&-1===t.indexOf(e)}},dni:{message:"El DNI no es valido",rule:function(e,t,a){return a.helpers.testRegex(e,/^\d{8}[a-zA-Z]$/)&&-1===t.indexOf(e)}}},messages:{required:"Este campo es obligatorio",alpha_num_space:"Solo se permiten caracteres alfanumericos",numeric:"Solo se permiten numeros",email:"Email no es correcto",alpha_space:"Solo se permiten letras y espacios"}}),v.currentUser)if(!0===this.admin){this.userId=this.props.match.params.id;var t=v.currentUser.email;N.a.get(this.url+"user/"+t).then((function(t){"success"===t.data.status&&t.data.user.email===v.currentUser.email?e.getUser(e.userId):e.setState({identity:!1})}))}else this.userId=this.props.match.params.id,N.a.get(this.url+"getemail/"+this.userId).then((function(t){"success"===t.data.status&&t.data.email===v.currentUser.email?e.getUser(e.userId):e.setState({identity:!1})}));else this.setState({identity:!1})}},{key:"render",value:function(){var e=this;return!1===this.state.loading?s.a.createElement("div",{id:"info",className:"col-lg-12 mt-3"},!0===this.state.identity?s.a.createElement(s.a.Fragment,null,!0===this.admin?s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,"Perfil de: ",this.state.user.nombre+" "+this.state.user.apellidos),s.a.createElement("small",null,this.state.user.email)):s.a.createElement("h2",null,"Mi perfil   -   ",this.state.user.nombre+" "+this.state.user.apellidos),s.a.createElement("hr",null),s.a.createElement("div",{className:"row"},s.a.createElement("img",{className:"user-image",src:this.state.user.imagen,alt:"user"})),s.a.createElement("div",{className:"row"},s.a.createElement("form",{className:"col-md-5 ml-4 pl-0",onSubmit:this.recibirFormulario},s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"nombre",className:"ml-2"},"Nombre"),s.a.createElement("input",{id:"nombre",className:"form-control",type:"text",value:this.state.user.nombre,name:"nombre",ref:this.nombreRef,onChange:this.changeState,required:!0}),this.validator.message("nombre",this.state.user.nombre,"required|names_surnames")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"apellidos",className:"ml-2"},"Apellidos"),s.a.createElement("input",{className:"form-control",type:"text",name:"apellidos",value:this.state.user.apellidos,ref:this.apellidosRef,onChange:this.changeState,required:!0}),this.validator.message("apellidos",this.state.user.apellidos,"required|names_surnames")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"telefono",className:"ml-2"},"Telefono"),s.a.createElement("input",{className:"form-control",type:"text",name:"telefono",value:this.state.user.telefono,ref:this.telefonoRef,onChange:this.changeState,maxLength:"9",required:!0}),this.validator.message("telefono",this.state.user.telefono,"required|telefono")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"dni",className:"ml-2"},"DNI"),s.a.createElement("input",{className:"form-control",type:"text",name:"dni",value:this.state.user.dni,ref:this.dniRef,onChange:this.changeState,required:!0}),this.validator.message("dni",this.state.user.dni,"required|dni")),s.a.createElement("div",{className:"form-group text-left"},s.a.createElement("label",{htmlFor:"image",className:"ml-2"},"Avatar"),s.a.createElement("input",{className:"form-control-file mr-2 ml-2",type:"file",name:"imagen",onChange:function(t){return e.recogerFoto(t)}}),!0===this.state.loading_file&&s.a.createElement("small",null,"Cargando imagen...")),s.a.createElement("div",{className:"clearfix"}),s.a.createElement("input",{type:"submit",value:"Actualizar datos",className:"btn btn-success"})),!0===this.admin&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-md-6 ml-5"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},s.a.createElement("label",{htmlFor:"textoHistorial"},"Agregar al historial"),s.a.createElement("input",{className:"form-control mt-1 mb-1",type:"text",name:"textoHistorial",ref:this.textoHistorialRef,required:!0}),s.a.createElement("input",{className:"form-control mt-1 mb-1",type:"date",name:"fechaHistorial",ref:this.fechaHistorialRef,required:!0}),s.a.createElement("input",{className:"btn btn-success mt-1 mb-1",type:"button",value:"A\xf1adir",onClick:this.addHistorial})),s.a.createElement("div",{className:"historial col-12 mt-4"},s.a.createElement("ul",{className:"list-group"},void 0!==this.state.historial&&null!==this.state.historial.length&&this.state.historial.length>=1?this.listHistorial=this.state.historial.map((function(e,t){return s.a.createElement("li",{className:"list-group-item",key:t},s.a.createElement("p",null,e.texto+" - "+e.fecha))})):s.a.createElement("li",{className:"list-group-item"},s.a.createElement("h3",null,"No hay ningun historial")))),s.a.createElement("button",{className:"btn btn-danger",style:{margin:"2rem auto"},onClick:this.eliminarUsuario},"Eliminar usuario")))))):s.a.createElement(s.a.Fragment,null,!0===this.admin?s.a.createElement("div",{id:"info"},s.a.createElement("h1",{className:"mt-5"},"Problema con carga de Usuario")):s.a.createElement(d.a,{to:"/login"}))):s.a.createElement("div",{id:"info"},s.a.createElement("h1",{className:"mt-5"},"Cargando..."))}}]),a}(r.Component),X=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).url=y.url,e.state={users:{},message:null,status:null},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;N.a.get(this.url+"users").then((function(t){"success"===t.data.status?e.setState({users:t.data.users,status:"success"}):e.setState({status:"error",message:t.data.message})}))}},{key:"render",value:function(){if(this.state.users.length>=1){var e=this.state.users.map((function(e,t){return s.a.createElement("div",{key:t,id:e.userId,className:"card"},s.a.createElement("img",{className:"card-img-top",src:e.user.imagen,alt:"Cardcap"}),s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title "},e.user.nombre+" "+e.user.apellidos),s.a.createElement("small",{className:"card-text"},e.user.email),s.a.createElement("br",null)),s.a.createElement("div",{class:"card-footer"},s.a.createElement(u.b,{to:"/adminperfil/requestuser/"+e.userId,className:"btn btn-primary"},"Ver Perfil")))}));return s.a.createElement("div",{id:"clientes",className:"row"},e)}return void 0===this.state.users.length&&"error"===this.state.status?s.a.createElement("div",{id:"clientes",className:"text-center"},s.a.createElement("h1",{className:"mt-5"},"No hay clientes para mostrar")):s.a.createElement("div",{id:"clientes",className:"text-center"},s.a.createElement("h1",{className:"mt-5"},"Cargando..."))}}]),a}(r.Component),ee=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).url=y.url,e.state={citas:[],message:null,status:null},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;N.a.get(this.url+"pendingcitas").then((function(t){"success"===t.data.status?e.setState({citas:t.data.citas,status:"success"}):e.setState({status:"error",message:t.data.message})}))}},{key:"updateCita",value:function(e,t,a){var r=this;e.preventDefault();var s=K()(e.target[0].value).format("DD/MM/YYYY"),n=e.target[1].value,l=this.state.citas[a].cita;l.hora=n,l.fecha=s,l.estado="actualizado",N.a.put(this.url+"cita",{cita:l,id:t}).then((function(e){if("success"===e.data.status){var t=r.state.citas;t.splice(a,1),r.setState({citas:t,status:"success"}),L()("Cita guardada correctamente","Cita se ha guardado en tu calendario correctamente","success"),r.forceUpdate(),N.a.post(r.url+"email/confirmacita",{cita:l})}else console.log(e.data.error),L()("Cita no se ha guardado correctamente","Cita no se ha guardado en tu calendario","error")}))}},{key:"render",value:function(){var e=this;if(this.state.citas.length>=1){var t=this.state.citas.map((function(t,a){return s.a.createElement("li",{className:"list-group-item",key:a},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-4"},s.a.createElement("h5",null,t.cita.user.nombre+" "+t.cita.user.apellidos),s.a.createElement("p",null,t.cita.user.email)),s.a.createElement("form",{className:"col-8",onSubmit:function(r){return e.updateCita(r,t.citaId,a)}},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement("input",{className:"form-control m-1",type:"date",name:"fechaCita",required:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("input",{className:"form-control m-1 ",type:"time",name:"horaCita",min:"09:00",max:"20:00",required:!0})),s.a.createElement("input",{className:"btn btn-success mr-4 ml-4",type:"submit",value:"Aceptar"})))))}));return s.a.createElement("ul",{className:"list-group"},t)}return void 0===this.state.citas.length||"error"===this.state.status?s.a.createElement("div",{id:"clientes",className:"text-center"},s.a.createElement("h1",{className:"mt-5"},"No hay citas para mostrar")):s.a.createElement("div",{id:"clientes",className:"text-center"},s.a.createElement("h1",{className:"mt-5"},"Cargando..."))}}]),a}(r.Component),te=a(62),ae=(a(147),Object(te.b)(K.a)),re=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).eventsList=[],e.url=y.url,e.citaaux=[],e.state={citas:[],message:null,status:null,showmodal:!1,show:!1},e.actualizadorCitas=function(){e.eventsList=[],e.state.citas.forEach((function(t,a){var r=t.cita.fecha.split("/"),s=t.cita.hora.split(":");e.eventsList.push({title:t.cita.user.nombre+" "+t.cita.user.apellidos,start:new Date(parseInt(r[2]),parseInt(r[1])-1,parseInt(r[0]),parseInt(s[0]),parseInt(s[1]),0),end:new Date(parseInt(r[2]),parseInt(r[1])-1,parseInt(r[0]),parseInt(s[0])+1,parseInt(s[1]),0),id:t.citaId}),e.forceUpdate()}))},e.pulsadoEvento=function(t){e.state.citas.forEach((function(a,r){t.id===a.citaId&&(e.citaaux.push(a),e.setState({show:!0}))}))},e.cerradoEvento=function(){e.setState({show:!1}),e.citaaux=[]},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;N.a.get(this.url+"updatedcitas").then((function(t){"success"===t.data.status?(e.setState({citas:t.data.citas,status:"success"}),e.actualizadorCitas(),e.forceUpdate()):e.setState({status:"error",message:t.data.message})}))}},{key:"updateCita",value:function(e,t){var a=this;e.preventDefault();var r=K()(e.target[0].value).format("DD/MM/YYYY"),s=e.target[1].value,n=this.citaaux[0].cita;n.hora=s,n.fecha=r,n.estado="actualizado",N.a.put(this.url+"cita",{cita:n,id:t}).then((function(e){"success"===e.data.status?(a.actualizadorCitas(),a.cerradoEvento(),L()("Cita guardada correctamente","Cita se ha guardado en tu calendario correctamente","success"),a.forceUpdate(),N.a.post(a.url+"email/cambiocita",{cita:n})):L()("Cita no se ha guardado correctamente","Cita no se ha guardado en tu calendario","error")}))}},{key:"envioRecordatorio",value:function(e){var t=e;N.a.post(this.url+"email/recordatorio",{cita:t}).then((function(e){"success"===e.data.status&&L()("Recordatorio de cita enviado","Se ha enviado un correo de recordatorio al cliente","success")}))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"bigCalendar-container"},s.a.createElement(te.a,{localizer:ae,events:this.eventsList,startAccessor:"start",endAccessor:"end",defaultView:"week",onSelectEvent:function(t){e.pulsadoEvento(t)},min:new Date(2008,0,1,9,0),max:new Date(2008,0,1,20,0),style:{height:500,margin:"2rem"}})),1===this.citaaux.length&&s.a.createElement(B.a,{show:this.state.show,onHide:this.cerradoEvento,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},s.a.createElement(B.a.Header,{closeButton:!0},s.a.createElement(B.a.Title,{className:"text-center"},s.a.createElement("h2",null,this.citaaux[0].cita.fecha+" - "+this.citaaux[0].cita.hora),s.a.createElement("h4",null,this.citaaux[0].cita.user.nombre+" "+this.citaaux[0].cita.user.apellidos))),s.a.createElement(B.a.Body,null,s.a.createElement("div",{className:"infocitacontacto pl-3"},s.a.createElement("h6",{className:"m-1 "},"Telefono: ",this.citaaux[0].cita.user.telefono),s.a.createElement("h6",{className:"m-1 "},"Email: ",this.citaaux[0].cita.user.email)),s.a.createElement("div",{className:"infoactualizarcita mt-3"},s.a.createElement("form",{className:"col-12",onSubmit:function(t){return e.updateCita(t,e.citaaux[0].citaId)}},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement("input",{className:"form-control m-1",type:"date",name:"fechaCita",required:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("input",{className:"form-control m-1 ",type:"time",name:"horaCita",min:"09:00",max:"20:00",required:!0})),s.a.createElement("div",{className:"col"},s.a.createElement("input",{className:"btn btn-success m-1",type:"submit",value:"Actualizar cita"})))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col d-flex justify-content-between  mt-2 mb-2"},s.a.createElement("button",{className:"btn btn-primary m-auto",onClick:function(){return e.envioRecordatorio(e.citaaux[0].cita)}},"Enviar recordatorio"))))),s.a.createElement(B.a.Footer,null,s.a.createElement(Y.a,{variant:"secondary",onClick:this.cerradoEvento},"Cerrar"))))}}]),a}(r.Component),se=a(37),ne=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).url=y.url,e.userId=null,e.state={identity:!0,user:{},status:null,loading:!0},e.getUser=function(t){N.a.get(e.url+"getuser/"+t).then((function(t){"success"===t.data.status&&(e.setState({user:t.data.user,loading:!1}),!1===e.state.user.admin&&e.setState({identity:!1}))}))},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;void 0===v.currentUser?this.setState({identity:!1}):(this.userId=this.props.match.params.adminid,N.a.get(this.url+"getemail/"+this.userId).then((function(t){"success"===t.data.status&&t.data.email===v.currentUser.email?e.getUser(e.userId):e.setState({identity:!1})})))}},{key:"render",value:function(){return!1===this.state.loading?s.a.createElement("div",{id:"admin",className:"col-lg-12 mt-3"},!0===this.state.identity?s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,"Bienvenido   -   ",this.state.user.nombre+" "+this.state.user.apellidos),s.a.createElement("hr",null),s.a.createElement(u.a,null,s.a.createElement("div",{id:"panel"},s.a.createElement(d.a,{exact:!0,from:"/",to:"/adminperfil/"+this.userId+"/clientes"}),s.a.createElement(se.d,{className:"nav-tabs mt-5"},s.a.createElement(se.e,null,s.a.createElement(se.f,{to:"/adminperfil/"+this.userId+"/clientes"},"Clientes")),s.a.createElement(se.e,null,s.a.createElement(se.f,{to:"/adminperfil/"+this.userId+"/citas"},"Citas")),s.a.createElement(se.e,null,s.a.createElement(se.f,{to:"/adminperfil/"+this.userId+"/calendario"},"Calendario"))),s.a.createElement(d.d,null,s.a.createElement(d.b,{path:"/adminperfil/"+this.userId+"/clientes"},s.a.createElement(X,null)),s.a.createElement(d.b,{path:"/adminperfil/"+this.userId+"/citas"},s.a.createElement(ee,null)),s.a.createElement(d.b,{path:"/adminperfil/"+this.userId+"/calendario"},s.a.createElement(re,null)),s.a.createElement(d.b,{exact:!0,path:"/perfil/:id/:admin",component:Q}),s.a.createElement(d.b,{path:"/adminperfil/requestuser/:id",render:function(e){var t=e.match.params.id;return s.a.createElement(d.a,{to:"/perfil/"+t+"/"+!0})}}))))):s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{to:"/login"}))):s.a.createElement("h1",null,"Cargando....")}}]),a}(r.Component),le=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).url=y.url,e.userId=null,e.state={carrito:[],identity:!0,user:{}},e.getUser=function(t){N.a.get(e.url+"getuser/"+t).then((function(t){"succes"===t.data.status&&e.setState({user:t.data.user})})),e.setState({carrito:e.props.location.state.carrito})},e.agregarItem=function(t){N.a.post(e.url+"carrito/agregar",{item_id:t}).then((function(t){"success"===t.data.status&&e.setState({carrito:t.data.carrito})}))},e.reducirItem=function(t){N.a.post(e.url+"carrito/quitar",{item_id:t}).then((function(t){"success"===t.data.status&&e.setState({carrito:t.data.carrito})}))},e.eliminarItem=function(t){N.a.post(e.url+"carrito/eliminar",{item_id:t}).then((function(t){"success"===t.data.status?(e.setState({carrito:t.data.carrito}),L()("Producto eliminado correctamente","El producto se ha eliminado del carrito correctamente","success")):L()("El producto no se ha eliminado correctamente","Ha ocurrido un error al eliminar el producto del carrito, intentelo mas tarde","error")}))},e.procesarCompra=function(){},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({carrito:this.props.location.state.carrito})}},{key:"componentWillMount",value:function(){var e=this;v.currentUser?(this.userId=this.props.location.state.userId,"null"===this.userId?this.setState({identity:!1}):N.a.get(this.url+"getemail/"+this.userId).then((function(t){"success"===t.data.status&&t.data.email===v.currentUser.email?e.getUser(e.userId):e.setState({identity:!1})}))):this.setState({identity:!1})}},{key:"render",value:function(){var e,t=this;return e=this.state.carrito.length>=1?this.state.carrito.map((function(e,a){return console.log(e),s.a.createElement("li",{key:a,className:"list-group-item m-2"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-4 col-12 text-md-left text-center"},s.a.createElement("img",{src:e.imagen,className:"imagencarrito",alt:"Cartimg"}),s.a.createElement("p",{className:"d-md-inline  m-3"},e.nombre)),s.a.createElement("div",{className:"col-md-8 col-12 align-self-center"},s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("div",{className:"col mt-2"},s.a.createElement("div",{className:"row flex-nowrap align-items-center justify-content-center align-self-center"},s.a.createElement("div",{className:"col"},s.a.createElement("button",{className:"btn btn-danger m-1",onClick:function(){return t.reducirItem(e.id)}},"-")),s.a.createElement("div",{className:"col text-center p-1",style:{backgroundColor:"#A4AAA5",border:"1px solid black",borderRadius:"4px",color:"white"}},s.a.createElement("label",{className:"text-center "},e.cantidad)),s.a.createElement("div",{className:"col"},s.a.createElement("button",{className:"btn btn-success m-1",onClick:function(){return t.agregarItem(e.id)}},"+")))),s.a.createElement("div",{className:"col mt-2"},s.a.createElement("button",{className:"btn btn-danger mr-4 ml-4",onClick:function(){return t.eliminarItem(e.id)}},"Eliminar"))))))})):"error"===this.state.status||0===this.state.carrito.length?s.a.createElement("h1",{className:"mt-5 text-center"},"No hay productos en el carrito"):s.a.createElement("h1",{className:"mt-5 text-center"},"Cargando..."),!1===this.state.identity?s.a.createElement(d.a,{to:"/login"}):s.a.createElement("div",{id:"carrito",className:"container-fluid mt-4"},s.a.createElement("div",{className:"row "},s.a.createElement("div",{className:"col-12 text-left m-4"},s.a.createElement("h2",null,"Carrito"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{id:"carrito-list",className:"col-md-8 col-12 ml-3"},s.a.createElement("ul",{className:"p-3"},e)),s.a.createElement("div",{id:"boton-procesar",className:"col-12 col-md-3 align-self-center"},s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("button",{className:"btn btn-primary",onClick:function(){return t.procesarCompra()}},"Procesar compra")))))}}]),a}(r.Component),ie=function(e){Object(m.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={isLogged:!1},e.logged=function(){e.setState({isLogged:!0})},e.signout=function(){e.setState({isLogged:!1})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(u.a,null,!0===this.state.isLogged?s.a.createElement(x,{logged:!0}):s.a.createElement(x,null),s.a.createElement(d.d,null,s.a.createElement(d.b,{exact:!0,path:"/",component:A}),s.a.createElement(d.b,{exact:!0,path:"/home",component:A}),s.a.createElement(d.b,{exact:!0,path:"/login",component:M}),s.a.createElement(d.b,{exact:!0,path:"/register",component:W}),s.a.createElement(d.b,{exact:!0,path:"/servicios",component:G}),s.a.createElement(d.b,{exact:!0,path:"/tienda/:id?",component:Z}),s.a.createElement(d.b,{exact:!0,path:"/carrito",component:le}),s.a.createElement(d.b,{exact:!0,path:"/miperfil/:id",component:Q}),s.a.createElement(d.b,{exact:!0,path:"/adminperfil/:adminid",component:ne}),s.a.createElement(d.b,{exact:!0,path:"/citas",component:$}),s.a.createElement(d.b,{exact:!0,path:"/logged",render:function(){return e.logged(),s.a.createElement(d.a,{to:"/"})}}),s.a.createElement(d.b,{exact:!0,path:"/signout",render:function(){return e.signout(),s.a.createElement(d.a,{to:"/"})}}),s.a.createElement(d.b,{component:V})),s.a.createElement(q,null))}}]),a}(r.Component);var ce=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(ie,null))},oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function me(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(s.a.createElement(ce,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");oe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):me(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):me(t,e)}))}}()},81:function(e,t,a){e.exports=a.p+"static/media/logo.dbc517cd.png"},83:function(e,t,a){e.exports=a.p+"static/media/a.83bde698.png"},84:function(e,t,a){e.exports=a.p+"static/media/b.8ba9f6ff.png"},85:function(e,t,a){e.exports=a.p+"static/media/c.98aafa73.png"},86:function(e,t,a){e.exports=a.p+"static/media/d.464a4d00.png"},87:function(e,t,a){e.exports=a.p+"static/media/carrito.420ed8ab.svg"}},[[103,1,2]]]);
//# sourceMappingURL=main.5dd00d26.chunk.js.map